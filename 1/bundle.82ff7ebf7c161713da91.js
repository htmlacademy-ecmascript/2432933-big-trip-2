(()=>{"use strict";const e=["Taxi","Bus","Train","Ship","Drive","Flight","Check-in","Sightseeing","Restaurant"],t=["Amsterdam","Geneva","Chamonix","Moscow"],n=document.querySelector(".trip-events"),i=document.querySelector(".trip-main__trip-controls");function s(e,t,n="beforeend"){t.insertAdjacentElement(n,e.getElement())}class r{getElement(){return this.element||(this.element=function(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}(this.template)),this.element}}class a extends r{constructor({point:e,offers:t}){super(),this.point=e,this.offers=t}get template(){return((e,t)=>{const{type:n,basePrice:i,isFavorite:s}=e,r=s?"event__favorite-btn--active":"",a=((e,t)=>{const n=t.find((t=>t.type===e.type))||{offers:[]},i=new Set(e.offers);return n.offers.filter((e=>i.has(e.id))).map((e=>(e=>{const{title:t,price:n}=e;return`<li class="event__offer">\n                <span class="event__offer-title">${t}</span> &plus;&euro;&nbsp;\n                <span class="event__offer-price">${n}</span>\n              </li>`})(e))).join("")})(e,t);return`<li class="trip-events__item">\n              <div class="event">\n                <time class="event__date" datetime="2019-03-18">MAR 18</time>\n                <div class="event__type">\n                  <img class="event__type-icon" width="42" height="42" src="img/icons/${n}.png" alt="Event type icon">\n                </div>\n                <h3 class="event__title">${n} Chamonix</h3>\n                <div class="event__schedule">\n                  <p class="event__time">\n                    <time class="event__start-time" datetime="2019-03-18T14:30">14:30</time>\n                    &mdash;\n                    <time class="event__end-time" datetime="2019-03-18T16:05">16:05</time>\n                  </p>\n                  <p class="event__duration">01H 35M</p>\n                </div>\n                <p class="event__price">\n                  &euro;&nbsp;<span class="event__price-value">${i}</span>\n                </p>\n                <h4 class="visually-hidden">Offers:</h4>\n                <ul class="event__selected-offers">\n                     ${a}\n                </ul>\n                <button class="event__favorite-btn  ${r}" type="button">\n                  <span class="visually-hidden">Add to favorite</span>\n                  <svg class="event__favorite-icon" width="28" height="28" viewBox="0 0 28 28">\n                    <path d="M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z"/>\n                  </svg>\n                </button>\n                <button class="event__rollup-btn" type="button">\n                  <span class="visually-hidden">Open event</span>\n                </button>\n              </div>\n            </li>`})(this.point,this.offers)}}class l extends r{get template(){return'<ul class="trip-events__list"></ul>'}}class o extends r{constructor({point:e,offers:t,destinations:n}){super(),this.point=e,this.offers=t,this.destinations=n}get template(){return((n,i,s)=>{const{type:r,basePrice:a}=n,l=e.map((e=>`<div class="event__type-item">\n<input id="event-type-${e}-1" class="event__type-input  visually-hidden" type="radio" name="event-type" value="${e}">\n<label class="event__type-label  event__type-label--${e}" for="event-type-${e}-1">${e}</label>\n</div> `)).join(""),o=t.map((e=>`<option value="${e}"></option>`)).join(""),p=((e,t)=>{const n=t.find((t=>t.type===e.type));return n?((e,t)=>{const{offers:n}=t;return`\n      <section class="event__section event__section--offers">\n          <h3 class="event__section-title event__section-title--offers">Offers</h3>\n\n          <div class="event__available-offers">\n              ${n.map((t=>`\n                <div class="event__offer-selector">\n        <input class="event__offer-checkbox visually-hidden" id="offer-${t.id}" type="checkbox" name="event-offer-${t.id}"\n        ${e.offers.includes(t.id)?"checked":""}>\n                    <label class="event__offer-label" for="offer-${t.id}">\n                        <span class="event__offer-title">${t.title}</span>\n                        &plus;&euro;&nbsp;\n                        <span class="event__offer-price">${t.price}</span>\n                    </label>\n                </div>`)).join("")}\n         </div>\n        </section>\n      `})(e,n):""})(n,i),d=((e,t)=>{const n=t.find((t=>t.id===e.destination));return n?(e=>{const{description:t,pictures:n}=e;return`\n  <section class="event__section  event__section--destination">\n      <h3 class="event__section-title  event__section-title--destination">Destination</h3>\n      <p class="event__destination-description">${t}</p>\n      <div class="event__photos-container">\n          <div class="event__photos-tape">\n              ${n.map((e=>`\n                  <img class="event__photo" src="${e.src}" alt="${e.description}">\n              `)).join("")}\n          </div>\n      </div>\n  </section>`})(n):""})(n,s);return`\n  <li class="trip-events__item">\n<form class="event event--edit" action="#" method="post">\n  <header class="event__header">\n    <div class="event__type-wrapper">\n      <label class="event__type  event__type-btn" for="event-type-toggle-1">\n        <span class="visually-hidden">Choose event type</span>\n        <img class="event__type-icon" width="17" height="17" src="img/icons/${r}.png" alt="Event type icon">\n      </label>\n      <input class="event__type-toggle  visually-hidden" id="event-type-toggle-1" type="checkbox">\n\n      <div class="event__type-list">\n        <fieldset class="event__type-group">\n          <legend class="visually-hidden">Event type</legend>\n          ${l}\n\n        </fieldset>\n      </div>\n    </div>\n\n    <div class="event__field-group  event__field-group--destination">\n      <label class="event__label  event__type-output" for="event-destination-1">\n          ${r}\n      </label>\n      <input class="event__input  event__input--destination" id="event-destination-1" type="text" name="event-destination" value="Chamonix" list="destination-list-1">\n      <datalist id="destination-list-1">\n        ${o}\n       </datalist>\n    </div>\n\n    <div class="event__field-group  event__field-group--time">\n      <label class="visually-hidden" for="event-start-time-1">From</label>\n      <input class="event__input  event__input--time" id="event-start-time-1" type="text" name="event-start-time" value="18/03/19 12:25">\n      &mdash;\n      <label class="visually-hidden" for="event-end-time-1">To</label>\n      <input class="event__input  event__input--time" id="event-end-time-1" type="text" name="event-end-time" value="18/03/19 13:35">\n    </div>\n\n    <div class="event__field-group  event__field-group--price">\n      <label class="event__label" for="event-price-1">\n        <span class="visually-hidden">Price</span>\n        &euro;\n      </label>\n      <input class="event__input  event__input--price" id="event-price-1" type="text" name="event-price" value="${a}">\n    </div>\n\n    <button class="event__save-btn  btn  btn--blue" type="submit">Save</button>\n    <button class="event__reset-btn" type="reset">Delete</button>\n    <button class="event__rollup-btn" type="button">\n      <span class="visually-hidden">Open event</span>\n    </button>\n  </header>\n  <section class="event__details">\n      ${p}\n     ${d}\n  </section>\n</form>\n</li>\n  `})(this.point,this.offers,this.destinations)}}class p extends r{constructor(){super()}get template(){return'<form class="trip-events__trip-sort  trip-sort" action="#" method="get">\n            <div class="trip-sort__item  trip-sort__item--day">\n              <input id="sort-day" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-day">\n              <label class="trip-sort__btn" for="sort-day">Day</label>\n            </div>\n\n            <div class="trip-sort__item  trip-sort__item--event">\n              <input id="sort-event" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-event" disabled>\n              <label class="trip-sort__btn" for="sort-event">Event</label>\n            </div>\n\n            <div class="trip-sort__item  trip-sort__item--time">\n              <input id="sort-time" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-time">\n              <label class="trip-sort__btn" for="sort-time">Time</label>\n            </div>\n\n            <div class="trip-sort__item  trip-sort__item--price">\n              <input id="sort-price" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-price" checked>\n              <label class="trip-sort__btn" for="sort-price">Price</label>\n            </div>\n\n            <div class="trip-sort__item  trip-sort__item--offer">\n              <input id="sort-offer" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-offer" disabled>\n              <label class="trip-sort__btn" for="sort-offer">Offers</label>\n            </div>\n          </form>'}}class d extends r{get template(){return'\n\n            <div class="trip-controls__filters">\n              <h2 class="visually-hidden">Filter events</h2>\n              <form class="trip-filters" action="#" method="get">\n                <div class="trip-filters__filter">\n                  <input id="filter-everything" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="everything" checked="">\n                  <label class="trip-filters__filter-label" for="filter-everything">Everything</label>\n                </div>\n\n                <div class="trip-filters__filter">\n                  <input id="filter-future" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="future">\n                  <label class="trip-filters__filter-label" for="filter-future">Future</label>\n                </div>\n\n                <div class="trip-filters__filter">\n                  <input id="filter-present" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="present">\n                  <label class="trip-filters__filter-label" for="filter-present">Present</label>\n                </div>\n\n                <div class="trip-filters__filter">\n                  <input id="filter-past" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="past">\n                  <label class="trip-filters__filter-label" for="filter-past">Past</label>\n                </div>\n\n                <button class="visually-hidden" type="submit">Accept filter</button>\n              </form>\n            </div>\n          '}}const c=[{id:"f1",basePrice:1100,dateFrom:"2019-07-10T22:55:56.845Z",dateTo:"2019-07-11T11:22:13.375Z",destination:"bf5",isFavorite:!1,offers:["t1","t2","t5"],type:"taxi"},{id:"f2",basePrice:500,dateFrom:"2019-07-13T22:55:56.845Z",dateTo:"2019-07-15T11:22:13.375Z",destination:"cf2",isFavorite:!0,offers:["s1","s2"],type:"ship"},{id:"f3",basePrice:12500,dateFrom:"2019-07-13T22:55:56.845Z",dateTo:"2019-07-15T11:22:13.375Z",destination:"fe2",isFavorite:!1,offers:[],type:"flight"}];function v(){return(e=c)[Math.floor(Math.random()*e.length)];var e}const _=[{type:"taxi",offers:[{id:"t1",title:"Слушать свою музыку",price:36},{id:"t2",title:"Не пристегиваться",price:128},{id:"t3",title:"Кричать в окно ",price:169},{id:"t4",title:"Выпитьвать в машине",price:57},{id:"t5",title:"Поменяться с водителем местами",price:470}]},{type:"ship",offers:[{id:"s1",title:"Choose meal",price:191},{id:"s2",title:"Choose seats",price:78},{id:"s3",title:"Upgrade to comfort class",price:95},{id:"s4",title:"Upgrade to business class",price:84},{id:"s5",title:"Add luggage",price:98},{id:"s6",title:"Business lounge",price:175}]}],f=[{id:"cf2",description:"Chamonix, is a beautiful city, a true asian pearl, with crowded streets.",name:"Chamonix",pictures:[{src:"https://random.onl/images/pictures/np31.jpg",description:"Chamonix parliament building"},{src:"https://random.onl/images/pictures/np31.jpg",description:"Chamonix parliament building"},{src:"https://random.onl/images/pictures/np31.jpg",description:"Chamonix parliament building"},{src:"https://random.onl/images/pictures/np31.jpg",description:"Chamonix parliament building"}]},{id:"bf5",description:"Moscow, is a beautiful city, a true asian pearl, with crowded streets.",name:"Moscow",pictures:[{src:"https://via.assets.so/game.jpg?w=1280&h=720",description:"Moscow parliament building"},{src:"https://via.assets.so/game.jpg?w=1280&h=720",description:"Moscow parliament building"}]}],u={boardContainer:document.querySelector(".trip-events"),pointsModel:new class{#e=_;#t=Array.from({length:3},v);#n=f;get points(){return this.#t}get offers(){return this.#e}get destinations(){return this.#n}}},m=new class{pointList=new l;constructor({boardContainer:e,pointsModel:t}){this.boardContainer=e,this.pointsModel=t}init(){this.boardPoints=[...this.pointsModel.points],this.boardOffers=[...this.pointsModel.offers],this.boardDestinations=[...this.pointsModel.destinations],s(this.pointList,n),s(new o({point:this.boardPoints[0],offers:this.boardOffers,destinations:this.boardDestinations}),this.pointList.getElement());for(let e=1;e<this.boardPoints.length;e++)s(new a({point:this.boardPoints[e],offers:this.boardOffers}),this.pointList.getElement())}getSortPoint(){return s(new p,n)}getHeaderComponent(){s(new d,i)}}(u);m.getHeaderComponent(),m.getSortPoint(),m.init()})();
//# sourceMappingURL=bundle.82ff7ebf7c161713da91.js.map